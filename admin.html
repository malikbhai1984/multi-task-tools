<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - WebAITool</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; background: #1a1a2e; color: white; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 32px; color: #00ce79; }
        .box { background: #16213e; padding: 25px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #0f3460; }
        .box h3 { color: #00ce79; margin-bottom: 15px; }
        input, textarea, select { padding: 10px; border-radius: 6px; border: none; margin: 5px; width: calc(25% - 10px); }
        textarea { width: calc(100% - 10px); }
        button { padding: 10px 20px; cursor: pointer; border-radius: 6px; border: none; font-weight: bold; background: #00ce79; color: white; margin: 5px; }
        button:hover { background: #00a35e; }
        .edit-btn { background: #3498db; }
        .del-btn { background: #ff4757; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; border-bottom: 1px solid #0f3460; text-align: left; }
        th { background: #0f3460; color: #00ce79; }
        .sub-item { padding-left: 30px; background: #0f1e2e; }
        @media (max-width: 768px) { input { width: calc(100% - 10px); } }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîê Admin Control Panel</h1>
        <p>Full CRUD System with Edit & Sub-Categories</p>
    </div>

    <!-- Menu Management with Edit -->
    <div class="box">
        <h3>1Ô∏è‚É£ Menu Bar (Create, Read, Update, Delete)</h3>
        <input type="text" id="mName" placeholder="Menu Name">
        <input type="text" id="mLink" placeholder="Link">
        <button onclick="addMenu()" id="menuBtn">‚ûï Add Menu</button>
        <button onclick="cancelEdit()" id="cancelMenuBtn" style="display:none; background:#6c757d;">‚ùå Cancel</button>
        <table id="menuTable"></table>
    </div>

    <!-- Tools with Sub-Categories -->
    <div class="box">
        <h3>2Ô∏è‚É£ Tool Categories (With Sub-Categories)</h3>
        <input type="text" id="tName" placeholder="Tool Name">
        <input type="text" id="tIcon" placeholder="Icon" value="üîß">
        <input type="text" id="tLink" placeholder="Link">
        <textarea id="tDesc" rows="2" placeholder="Description"></textarea>
        <select id="parentTool">
            <option value="">Main Category</option>
        </select>
        <button onclick="addTool()" id="toolBtn">‚ûï Add Tool</button>
        <button onclick="cancelToolEdit()" id="cancelToolBtn" style="display:none; background:#6c757d;">‚ùå Cancel</button>
        <table id="toolTable"></table>
    </div>

    <!-- Cards Per Row -->
    <div class="box">
        <h3>3Ô∏è‚É£ Cards Per Row</h3>
        <select id="cardsPerRow" onchange="saveCardsPerRow()">
            <option value="2">2 Cards</option>
            <option value="3">3 Cards</option>
            <option value="4">4 Cards</option>
        </select>
        <p style="margin-top:10px;">Current: <span id="currentCards"></span></p>
    </div>

    <!-- Footer -->
    <div class="box">
        <h3>4Ô∏è‚É£ Footer Text</h3>
        <textarea id="footerText" rows="2"></textarea>
        <button onclick="saveFooter()">üíæ Save</button>
    </div>

    <!-- Actions -->
    <button style="background:#6c5ce7;" onclick="window.location.href='index.html'">üëÅÔ∏è View Site</button>
    <button style="background:#f1c40f; color:black;" onclick="resetAll()">üîÑ Reset</button>

    <script>
        let editingMenuIndex = null;
        let editingToolIndex = null;

        // Initialize with sub-categories support
        if (!localStorage.getItem('initialized')) {
            localStorage.setItem('menuItems', JSON.stringify([
                {name: 'Home', link: 'index.html'},
                {name: 'Privacy', link: 'privacy.html'},
                {name: 'Contact', link: 'contact.html'}
            ]));
            
            localStorage.setItem('toolItems', JSON.stringify([
                {name: 'üñºÔ∏è Image Tools', desc: 'Image processing', link: 'image-tools.html', icon: 'üñºÔ∏è', parent: ''},
                {name: 'üì± QR Tools', desc: 'QR codes', link: 'qr-tools.html', icon: 'üì±', parent: ''},
                {name: 'üì∫ YouTube SEO', desc: 'YouTube tools', link: 'youtube-tools.html', icon: 'üì∫', parent: ''}
            ]));
            
            localStorage.setItem('cardsPerRow', '3');
            localStorage.setItem('footerText', '¬© 2024 WebAITool.net');
            localStorage.setItem('initialized', 'true');
        }

        function loadTables() {
            // Menu Table
            const menu = JSON.parse(localStorage.getItem('menuItems')) || [];
            document.getElementById('menuTable').innerHTML = `
                <tr><th>Name</th><th>Link</th><th>Actions</th></tr>
                ${menu.map((m, i) => `
                    <tr>
                        <td>${m.name}</td>
                        <td>${m.link}</td>
                        <td>
                            <button class="edit-btn" onclick="editMenu(${i})">‚úèÔ∏è Edit</button>
                            <button class="del-btn" onclick="deleteMenu(${i})">üóëÔ∏è Delete</button>
                        </td>
                    </tr>
                `).join('')}
            `;

            // Tool Table with Sub-Categories
            const tools = JSON.parse(localStorage.getItem('toolItems')) || [];
            
            // Update parent dropdown
            const parentSelect = document.getElementById('parentTool');
            const mainTools = tools.filter(t => !t.parent);
            parentSelect.innerHTML = '<option value="">Main Category</option>' + 
                mainTools.map((t, i) => `<option value="${i}">${t.name}</option>`).join('');

            // Display tools
            let tableHTML = '<tr><th>Icon</th><th>Name</th><th>Link</th><th>Actions</th></tr>';
            tools.forEach((t, i) => {
                const isSubItem = t.parent !== '' && t.parent !== undefined;
                tableHTML += `
                    <tr class="${isSubItem ? 'sub-item' : ''}">
                        <td>${isSubItem ? '‚Ü≥ ' : ''}${t.icon}</td>
                        <td>${t.name}</td>
                        <td>${t.link}</td>
                        <td>
                            <button class="edit-btn" onclick="editTool(${i})">‚úèÔ∏è Edit</button>
                            <button class="del-btn" onclick="deleteTool(${i})">üóëÔ∏è Delete</button>
                        </td>
                    </tr>
                `;
            });
            document.getElementById('toolTable').innerHTML = tableHTML;

            // Cards
            const cards = localStorage.getItem('cardsPerRow') || '3';
            document.getElementById('cardsPerRow').value = cards;
            document.getElementById('currentCards').textContent = cards + ' cards';

            // Footer
            document.getElementById('footerText').value = localStorage.getItem('footerText') || '';
        }

        // Menu CRUD
        function addMenu() {
            const name = document.getElementById('mName').value.trim();
            const link = document.getElementById('mLink').value.trim();
            if (!name || !link) return alert('Fill all fields!');
            
            const menu = JSON.parse(localStorage.getItem('menuItems')) || [];
            
            if (editingMenuIndex !== null) {
                menu[editingMenuIndex] = {name, link};
                editingMenuIndex = null;
                document.getElementById('menuBtn').textContent = '‚ûï Add Menu';
                document.getElementById('cancelMenuBtn').style.display = 'none';
            } else {
                menu.push({name, link});
            }
            
            localStorage.setItem('menuItems', JSON.stringify(menu));
            document.getElementById('mName').value = '';
            document.getElementById('mLink').value = '';
            loadTables();
        }

        function editMenu(i) {
            const menu = JSON.parse(localStorage.getItem('menuItems'));
            document.getElementById('mName').value = menu[i].name;
            document.getElementById('mLink').value = menu[i].link;
            editingMenuIndex = i;
            document.getElementById('menuBtn').textContent = 'üíæ Update Menu';
            document.getElementById('cancelMenuBtn').style.display = 'inline-block';
        }

        function cancelEdit() {
            editingMenuIndex = null;
            document.getElementById('mName').value = '';
            document.getElementById('mLink').value = '';
            document.getElementById('menuBtn').textContent = '‚ûï Add Menu';
            document.getElementById('cancelMenuBtn').style.display = 'none';
        }

        function deleteMenu(i) {
            if (!confirm('Delete?')) return;
            const menu = JSON.parse(localStorage.getItem('menuItems'));
            menu.splice(i, 1);
            localStorage.setItem('menuItems', JSON.stringify(menu));
            loadTables();
        }

        // Tool CRUD with Sub-Categories
        function addTool() {
            const name = document.getElementById('tName').value.trim();
            const icon = document.getElementById('tIcon').value.trim();
            const link = document.getElementById('tLink').value.trim();
            const desc = document.getElementById('tDesc').value.trim();
            const parent = document.getElementById('parentTool').value;
            if (!name || !link || !desc) return alert('Fill all fields!');
            
            const tools = JSON.parse(localStorage.getItem('toolItems')) || [];
            
            if (editingToolIndex !== null) {
                tools[editingToolIndex] = {name, icon, link, desc, parent};
                editingToolIndex = null;
                document.getElementById('toolBtn').textContent = '‚ûï Add Tool';
                document.getElementById('cancelToolBtn').style.display = 'none';
            } else {
                tools.push({name, icon, link, desc, parent});
            }
            
            localStorage.setItem('toolItems', JSON.stringify(tools));
            document.getElementById('tName').value = '';
            document.getElementById('tIcon').value = 'üîß';
            document.getElementById('tLink').value = '';
            document.getElementById('tDesc').value = '';
            document.getElementById('parentTool').value = '';
            loadTables();
        }

        function editTool(i) {
            const tools = JSON.parse(localStorage.getItem('toolItems'));
            document.getElementById('tName').value = tools[i].name;
            document.getElementById('tIcon').value = tools[i].icon;
            document.getElementById('tLink').value = tools[i].link;
            document.getElementById('tDesc').value = tools[i].desc;
            document.getElementById('parentTool').value = tools[i].parent || '';
            editingToolIndex = i;
            document.getElementById('toolBtn').textContent = 'üíæ Update Tool';
            document.getElementById('cancelToolBtn').style.display = 'inline-block';
        }

        function cancelToolEdit() {
            editingToolIndex = null;
            document.getElementById('tName').value = '';
            document.getElementById('tIcon').value = 'üîß';
            document.getElementById('tLink').value = '';
            document.getElementById('tDesc').value = '';
            document.getElementById('parentTool').value = '';
            document.getElementById('toolBtn').textContent = '‚ûï Add Tool';
            document.getElementById('cancelToolBtn').style.display = 'none';
        }

        function deleteTool(i) {
            if (!confirm('Delete?')) return;
            const tools = JSON.parse(localStorage.getItem('toolItems'));
            tools.splice(i, 1);
            localStorage.setItem('toolItems', JSON.stringify(tools));
            loadTables();
        }

        function saveCardsPerRow() {
            const val = document.getElementById('cardsPerRow').value;
            localStorage.setItem('cardsPerRow', val);
            document.getElementById('currentCards').textContent = val + ' cards';
            alert('Saved!');
        }

        function saveFooter() {
            localStorage.setItem('footerText', document.getElementById('footerText').value);
            alert('Footer saved!');
        }

        function resetAll() {
            if (!confirm('Reset all?')) return;
            localStorage.clear();
            location.reload();
        }

        loadTables();
    </script>
</body>
</html>
